@model IEM.Areas.FLEXIBUY.Models.PrSumEntity

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "DeletePRDetails";
    int rowNum = 0;
}

<b>
    <span style="color: rgb(52, 108, 196);">Delete PR</span>
</b>

<div class="well">
  

    <div class="panel panel-default" style="margin-bottom:15px;">
        <div>
            @Html.HiddenFor(a => a.prHead.prGid, new { @id = "txtprgid" })
        </div>
        <table class="myTableStyleTabNew" align="center" width="100%">
            <tr>

                <td style="padding:10px; width:20%;">

                    <div>
                        <span>PR Ref No.</span>
                        <br />

                        <div>
                            <input type="text"
                                   name="txtprrefno"
                                   class="textboxStyle ch"
                                   disabled="disabled"
                                   style="width:100%;"
                                   id="prrefno" value="@Model.prHead.prRefNo" />
                        </div>
                    </div>
                </td>
              
                <td style="padding:10px; width:20%;">
                    <div>
                        <span>PR Date</span>
                        <br />
                        <div>
                            <input type="text"
                                   name="txtprdate"
                                   class="textboxStyle"
                                   disabled="disabled"
                                   style="width:100%;"
                                   id="prdate" value="@Model.prHead.prDate" />

                        </div>
                    </div>
                </td>
              
                <td style="padding:10px; width:20%;">
                    <div>

                        <span>PR Raised by</span>
                        <br />

                        <div>
                            <input type="text"
                                   name="txtprraisedby"
                                   class="textboxStyle"
                                   disabled="disabled"
                                   style="width:100%;"
                                   id="prraisedby" value="@Model.prHead.prRaisedBy" />
                        </div>
                    </div>
                </td>
               
                <td style="padding:10px; width:20%;">
                    <div>
                        <span>FCCC</span>
                        <br />
                        <div>
                            <input type="text"
                                   name="txtprfccc"
                                   class="textboxStyle"
                                   disabled="disabled"
                                   style="width:100%;"
                                   id="prfccc" value="@Model.prHead.prFcc" />


                        </div>
                    </div>
                </td>
               
                <td style="padding:10px; width:20%;">
                    <div>
                        <span>Request by</span>
                        <br />
                        <div>
                            <input type="text"
                                   name="txtreqfor"
                                   class="textboxStyle"
                                   disabled="disabled"
                                   style="width:100%;"
                                   id="reqfor" value="@Model.prHead.prReqFor" />
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td style="padding:10px;">

                    @{

                        var expense = (string)Session["rblExpenses"];
                        if (expense != "")
                        {
                            if (expense == "C")
                            {
                                <div>
                                    <span>Expenses</span>
                                </div>

                                <div class="radio-inline">
                                    <span id="lblcapex">
                                        <input type="radio" id="id_rdcap" name="mode1" value="Capex" checked="checked"  />
                                        Capex
                                    </span>
                                </div>
                                <div class="radio-inline">
                                    <span id="lblopex">
                                        <input type="radio" id="id_rdope" name="mode1" value="Opex"  />
                                        Opex
                                    </span>
                                </div>

                            }
                            else
                            {
                                <div>
                                    <span>Expenses</span>
                                </div>
                                <div class="radio-inline">
                                    <span id="lblcapex">
                                        <input type="radio" id="id_rdcap" name="mode1" value="Capex"  />
                                        Capex
                                    </span>
                                </div>
                                <div class="radio-inline">
                                    <span id="lblopex">
                                        <input type="radio" id="id_rdope" name="mode1" value="Opex" checked="checked"  />
                                        Opex
                                    </span>
                                </div>
                            }
                        }
                    }
                </td>
               
                <td style="padding:10px;">
                    @{


                        var branchtype = (string)Session["rblBranchType"];
                        if (branchtype != "")
                        {
                            if (branchtype == "S")
                            {
                                <div>
                                    <span>Branch </span>
                                </div>

                                <div class="radio-inline">
                                    <span id="lblsingle">
                                        <input type="radio" id="id_rdsing" name="mode2" value="Single" checked="checked" disabled="disabled" />
                                        Single
                                    </span>
                                </div>
                                <div class="radio-inline">
                                    <span id="lblmultiple">
                                        <input type="radio" id="id_rdmult" name="mode2" value="Multiples" disabled="disabled" />
                                        Multiple
                                    </span>
                                </div>
                            }
                            else
                            {
                                <div>
                                    <span>Branch </span>
                                </div>
                                <div class="radio-inline">
                                    <span id="lblsingle">
                                        <input type="radio" id="id_rdsing" name="mode2" value="Single" disabled="disabled" />
                                        Single
                                    </span>
                                </div>
                                <div class="radio-inline">
                                    <span id="lblmultiple">
                                        <input type="radio" id="id_rdmult" name="mode2" value="Multiples" checked="checked" disabled="disabled" />
                                        Multiple
                                    </span>
                                </div>
                            }
                        }
                    }
                </td>
              <td>
                  <br />
                  <div style="padding:10px;">
                      @{
                          var rblprodserv = (string)Session["rblProductService"];
                          if (rblprodserv != "")
                          {
                              if (rblprodserv == "P")
                              {
                                  <div class="radio-inline">
                                      <span id="lblprod">
                                          <input type="radio" id="id_rdprod" name="modenew" value="Product" checked="checked" disabled="disabled" />
                                          Product
                                      </span>
                                  </div>
                                  <div class="radio-inline">
                                      <span id="lblserv">
                                          <input type="radio" id="id_rdserv" name="modenew" value="Service" disabled="disabled" />
                                          Service

                                      </span>
                                  </div>
                              }
                              else
                              {

                                  <div class="radio-inline">
                                      <span id="lblprod">
                                          <input type="radio" id="id_rdprod" name="modenew" value="Product" disabled="disabled" />
                                          Product
                                      </span>
                                  </div>
                                  <div class="radio-inline">
                                      <span id="lblserv">
                                          <input type="radio" id="id_rdserv" name="modenew" value="Service" checked="checked" disabled="disabled" />
                                          Service

                                      </span>
                                  </div>
                              }
                          }

                      }
                  </div>
              </td>
                <td style="padding:10px;">
                    <div>
                        <span>Branch</span>
                        <br />
                        <div>
                            <input type="text"
                                   name="txtbranch"
                                   class="textboxStyle"
                                   disabled="disabled"
                                   style="width:100%;"
                                   id="branch" value="@Model.prHead.prBranch" />

                        </div>
                    </div>
                </td>
              
              
                <td style="padding:10px;">
                    <div>
                        <span>PR Description</span>
                        <br />
                        <div>
                            <input type="text"
                                   name="txtprdesc"
                                   class="textboxStyle"
                                   disabled="disabled"
                                   style="width:100%;"
                                   id="prdesc" value="@Model.prHead.prDesc" />

                        </div>
                    </div>
                </td>
            </tr>
        </table>


    </div>
    @{
        var grid = new WebGrid(source: Model.lstproduct, canSort: true, canPage: true, rowsPerPage: 5, ajaxUpdateContainerId: "wgProductList", ajaxUpdateCallback: "D()", selectionFieldName: "SelectedRow");
        grid.Pager(WebGridPagerModes.All);
    }

    @if (rblprodserv == "P")
    {


        @functions {
            public static string Sorter(string columnName, string columnHeader, WebGrid grid)
            {
                return string.Format("{0} {1}", columnHeader, grid.SortColumn == columnName ?
                    grid.SortDirection == SortDirection.Ascending ? "▲" :
                    "▼" : string.Empty);
            }
        }

        @grid.GetHtml(
         tableStyle: "table table-bordered table-hover table-responsive",
        htmlAttributes: new { id = "grid", @style ="margin-bottom:5px;" },
        columns: grid.Columns
            (
            //Here I am going to add checkbox column
            //grid.Column("srNo", "srNo", style: "col-sm-1"),
                                   grid.Column("Sl", format: a => rowNum = rowNum + 1, style: "MidColumn5"),
     grid.Column(header: "Product Group", format: @<text>

                                    <label id="lblProductGroup">@item.product_Group</label></text>, canSort: false,style: "MidColumn20" ),

                   grid.Column(header: "Product Code",format: @<text>
            <label id="lblProductCode">@item.product_Code</label></text>,canSort: false, style: "col-sm-1"),
                   grid.Column(header: "Product Name",format: @<text>
            <label id="lblProductName">@item.product_Name</label> </text>,canSort: false, style: "MidColumn20"),
                     grid.Column(header: "Product Description",format: @<text>
            <label id="lblProductDesc">@item.product_Description</label> </text>,canSort: false, style: "cMidColumn40"),

                                    grid.Column(header: "Unit", format: @<text>
            <label id="lblProductUnit">@item.product_Unit</label> </text>,canSort: false, style: "col-sm-1"),

                     grid.Column(header: "Quantity", format: @<text>
            <label id="lblProductQuantity">@item.product_Qty</label> </text>, canSort: false, style: "col-sm-1")

                                                                                                                                                               ))
    }
    @if (rblprodserv == "S")
    {
        @grid.GetHtml(
         tableStyle: "table table-bordered table-hover table-responsive",
        htmlAttributes: new { id = "grid" },
        columns: grid.Columns
            (
            //Here I am going to add checkbox column
            //grid.Column("srNo", "srNo", style: "col-sm-1"),
                             grid.Column("Sl", format: a => rowNum = rowNum + 1, style: "MidColumn5"),
     grid.Column(header: "Service Group", format: @<text>

                                <label id="lblProductGroup">@item.service_Group</label></text>, canSort: false,style: "col-sm-1" ),

                   grid.Column(header: "Service Code",format: @<text>
            <label id="lblServiceCode">@item.service_Code</label></text>,canSort: false, style: "col-sm-1"),
                   grid.Column(header: "Service Name",format: @<text>
            <label id="lblServiceName">@item.service_Name</label> </text>,canSort: false, style: "col-sm-1"),
                     grid.Column(header: "Service Description",format: @<text>
            <label id="lblServiceDesc">@item.service_Description</label> </text>, canSort: false, style: "col-sm-3")

                                                                                                                                                                               ))

    }
    <label>Page: @(grid.PageIndex + 1) of @grid.PageCount</label>
    <input hidden="hidden" id="aa" />

    @*<div id="tabsat" style="height:400px;font-size:14px;">
            <ul>
                <li><a href="#tabs-1">Audit Trail</a></li>
                <li><a href="#tabs-2">Attachments</a></li>
            </ul>
            <div id="tabs-1">
                @Html.Partial("tab_auditrail")
            </div>
            <div id="tabs-2">
                @Html.Partial("viewprattachment")
            </div>
        </div>*@
    <br />
    <table class="myTableStyleTabNew" align="center">
        <tr>
            <td>
                <div @*style="padding:10px 10px 0px 0px;text-align:right;"*@>


                    @*<input class="btn btn-primary" type="button" value="Back" onclick='back()' />*@
                    @*<button type="button" id="@Model.prHead.prRefNo" type="submit" class="btn btn-danger" value="Delete">
                            <span style="color:white;" class="glyphicon glyphicon-trash"></span> Delete
                        </button>

                        <button type="button" class="btn btn-warning" value="Back" onclick="back()">
                            <span style="color:white;" class="glyphicon glyphicon-eye-close"></span> Back
                        </button>*@
                    @*<input class="btn btn-warning" type="submit" value="Delete" id="@Model.prHead.prRefNo" onclick='DeleteType()' />*@
                    @*<input class="btn btn-warning" type="submit" value="Delete" id="@Model.prHead.prGid" onclick='DeleteType()' />*@
                    <button type="button" onclick='DeleteType()' name="command" class="btn btn-primary" value="Delete">
                        <span class="glyphicon glyphicon-trash" style="color:white;"></span> Delete
                    </button>&nbsp;
                    <button type="button" onclick='back()' name="command" class="btn btn-warning" value="Back">
                        <span class="glyphicon glyphicon-eye-close" style="color:white;"></span> Back
                    </button>

                </div>
            </td>
        </tr>
    </table>
</div>

<input hidden="hidden" id="aa" />

<div id="ForPartialViewnew5hh"></div>
<script>
    function back() {
        location = "@Url.Action("PrSummary1", "PrSummary")";
    }
    $(document).ready(function () {
        $('#aa').val('');

    });
    var objDialog5;

    function viewattach(id) {

        if ($("#aa").val() == "") {
            $('#aa').val('anu');

            objDialog5 = $("[id$='ForPartialViewnew5hh']");
            objDialog5.dialog({
                autoOpen: false,
                modal: true,
                show: 'fade-in',
                close: 'fade-out',
                cache: false,
                width: 600,
                height: 400
            });
        }

        objDialog5.load('@Url.Action("viewprattachment", "PrSummary")?id=' + id);
        objDialog5.dialog({ title: 'PR Attachment List' });
        objDialog5.dialog("open");
    }


    function DeleteType() {

        var lbl = $("#txtprgid").val();
        //alert(lbl);

        jConfirm("Do you want to delete this PR Raising Type? ", "Delete PR Raising", function (j) {

            if (j == true) {

                $.post('@Url.Action("DeletePRDetails1", "PrSummary")?l=' + lbl + '&' + new Date().getTime(),
                     function (data) {
                         //alert(data);
                         if (data == 0) {
                             jAlert("Record Deleted Successfully!!!", "Success", function (r) {
                                 if (r = true) { location = '@Url.Action("PrSummary1", "PrSummary")?' + new Date().getTime()}
                             });
                         }
                         else {
                             jAlert("Can't Delete,In Use!!", "Error", function (r) {
                                 if (r = true) { location = location.href; }
                             });

                         }
                     }, 'json');
            }
        });
    }
</script>
