@model IEM.Areas.EOW.Models.CentraldataModel
@{
    if (Model.SupplierType == 'A')
    {
        ViewBag.SupplierType = 1;
    }

}
@using (Html.BeginForm())
{
    <table class="myTableStyleTabNew" style="width:100%;">
        <tr>
            <td style="width:15%;">
                <span>Received Date </span>
                <br />
                <input type="text"
                       id="EditRecivedDate"
                       name="txtRecivedDateFrom"
                       value="@Model.ReceivedDate"
                       onchange="checkdate()"
                       class="textboxStyle valid" />
            </td>
            <td style="width:15%;">
                <span>Raiser Code</span>
                <br />
                <input type="text"
                       name="txtraisercode"
                       id="raisercode"
                       value="@Model.RaiserCode"
                       class="textboxStyle valid"
                       readonly="readonly" />
            </td>
            <td>
                <a title="Search"><span class="glyphicon glyphicon-search" style="margin:27px 0px 0px 0px;" onclick="EmployeeSearch11()"></span></a>
            </td>
            <td style="width:33%;">
                <span> Raiser Name</span>
                <br />
                <input type="text"
                       name="txtraisername"
                       id="raisername"
                       value="@Model.RaiserName"
                       readonly="readonly"
                       class="textboxStyle valid" />
                <input type="hidden"
                       name="EmployeeId"
                       id="EmployeeId"
                       value="@Model.EmployeeId" />
            </td>
            <td colspan="2">
                <span>Raiser Department</span>
                <br />
                <input type="text"
                       name="EmployeeId"
                       id="EmployeeDept"
                       value="@Model.EmployeeDepartment"
                       class="textboxStyle"
                       readonly="readonly" />
            </td>
        </tr>

        <tr>
            <td>
                <span> Supplier Type</span>
                @Html.DropDownList("cnm", (IEnumerable<SelectListItem>)ViewBag.SupplierTypeEdit, "-----Select-----", new { @class = "textboxStyle valid", @style = "display: block;height:30px;margin-top: 4px;", @id = "SupplierIdCinward", @Name = "SupplierTypeEdit", @onchange = "suppliertype()" })
            </td>
            <td>
                <span> Supplier Code</span>
                <br />
                <input type="text"
                       name="txtsuppliercode"
                       id="suppliercode"
                       value="@Model.SupplierCode"
                       class="textboxStyle valid "
                       readonly="readonly" />
                <input type="hidden"
                       name="txtsupplierId"
                       id="supplierId"
                       value="@Model.SupplierId" />
            </td>
            <td>
                <a title="Search"><span class="glyphicon glyphicon-search" style="margin:27px 0px 0px 0px;" id="supname" onclick="Searchforsupp()"></span></a>
            </td>
            <td>
                <span> Supplier Name</span>
                <br />
                <input type="text"
                       name="txtSuppliername"
                       id="Suppliername"
                       value="@Model.SupplierName"
                       class="textboxStyle valid "
                       maxlength="128" />
            </td>
            <td>
                <span> Invoice Type</span>
                <br />
                <select class="textboxStyle valid" id="ddlClaimType">
                    <option value="0">---Select---</option>
                    <option value="P">PO</option>
                    <option value="W">WO</option>
                    <option value="N">Non PO/WO</option>
                    <option value="U">Utility</option>
                </select>
                <input type="hidden"
                       name="txtClaimType"
                       id="txtClaimType"
                       value="@Model.POtype" />
            </td>
            <td>
                <span>PO/WO No</span>
                <br />
                <input type="text"
                       id="txtponumber1"
                       name="txtInvoiceNo"
                       maxlength="32"
                       value="@Model.PONo"
                       class="textboxStyle" disabled="disabled" />
            </td>
            <td>
                <a title="Search"><span class="glyphicon glyphicon-search" style="margin:27px 0px 0px 0px;" id="posearchicon" onclick="PoSearch11()"></span></a>
            </td>
        </tr>

        <tr>
            <td>
                <span> Invoice Date</span>
                <br />
                <input type="text"
                       name="filter_name"
                       id="EditInvoiceDate"
                       value="@Model.InvoiceDate"
                       class="textboxStyle valid"
                       onchange="checkdateinvoice()" />
            </td>
            <td>
                <span>Invoice No</span>
                <br />
                <input type="text"
                       id="EditInvoiceNo"
                       name="txtInvoiceNo"
                       value="@Model.InvoiceNo"
                       class="textboxStyle valid"
                       style="text-transform:uppercase"
                       maxlength="64" />
            </td>
            <td>
                @*<a title="Search"><span class="glyphicon glyphicon-search" style="margin:27px 0px 0px 0px;" onclick="EmployeeSearch11()"></span></a>*@
            </td>
            <td colspan="3">
                <span>Remarks</span>
                <br />
                <input type="text"
                       id="EditRemarks"
                       name="txtRemarks"
                       value="@Model.Remarks"
                       class="textboxStyleBig "
                       maxlength="255" />
            </td>

        </tr>
        <tr>
            <td>
                <span> Currency</span>
                @Html.DropDownList("cnm", (IEnumerable<SelectListItem>)ViewBag.CentralCurrency, "-----Select-----", new { @class = "textboxStyle Valid", @style = "display: block;height:30px;margin-top: 4px;", @id = "Currencyinward", @Name = "SupplierType" })

            </td>
            <td>
                <span>Exchange Rate</span><br />
                <input type="text"
                       name="txtexrate"
                       id="txtexrate"
                       value="@ViewBag.exrate"
                       class="textboxStyle"
                       disabled="disabled"
                       onkeypress="return isAmount(event);"
                       maxlength="15" />
                @Html.HiddenFor(n => n.Exrate, new { @id = "txtecratehd" })
            </td>
            <td>
                @*<a title="Search"><span class="glyphicon glyphicon-search" style="margin:27px 0px 0px 0px;" onclick="EmployeeSearch11()"></span></a>*@
            </td>
            <td>
                <span>Currency Amount</span><br />
                <input type='text'
                       name='txtecfamontal'
                       class="textboxStyle valid"
                       id="txtecfcurramount"
                       value="@Model.Currencyamount"
                       maxlength="12" />
            </td>
            <td colspan="2">
                <span>ECF  Amount</span><br />
                <input type='text'
                       name='txtecfamontal'
                       id="txtecfamont"
                       readonly="readonly"
                       class="textboxStyle"
                       value="@Model.ECF_Amount" />
            </td>
        </tr>
        <tr> @*Ramya added 15 Feb 21*@
            <td colspan="6">
                <table width="100%">
                    <tr>
                        <td style="padding-left: 15px;" id="tdGSTCharged">
                            <span> GST Charged</span>
                            <br />
                            <input checked="checked" id="rdogstChargedFlagYes" name="rdogstChargedFlag" type="radio" value="Y" style="margin-top: 10px; margin-right:5px;">Yes
                            <input id="rdogstChargedFlagNo" name="rdogstChargedFlag" type="radio" value="N" style="margin: 10px 5px 0px 20px;">No
                        </td>
                        <td>
                            <span> Provider Location</span>
                            @Html.DropDownList("cnm", (IEnumerable<SelectListItem>)ViewBag.ProviderLocationEdit, new { @class = "textboxStyle Valid", @style = "display: block;margin-top: 4px;", @id = "ddlProvider", @Name = "ddlProvider" })
                        </td>
                        <td>
                            <span>Vendor GSTN</span><br />
                            <input type="text"
                                   name="txtvendorGSTN"
                                   id="txtvendorGSTN"
                                   value="@Model.centralinward_provider_gstn"
                                   class="textboxStyle"
                                   disabled="disabled"
                                   maxlength="15" />
                        </td>
                        <td>
                            <span>Receiver Location</span><br />
                            @Html.DropDownList("cnm", (IEnumerable<SelectListItem>)ViewBag.ReceiverLocationEdit, new { @class = "textboxStyle Valid", @style = "display: block;margin-top: 4px;", @id = "ddlReceiver", @Name = "ddlReceiver" })
                        </td>
                        <td>
                            <span>FICCL GSTN</span><br />
                            <input type="text"
                                   name="txtRecGSTIN"
                                   id="txtRecGSTIN"
                                   value="@Model.centralinward_receiver_gstn"
                                   class="textboxStyle"
                                   disabled="disabled"
                                   maxlength="15" />
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <div>
        <table class="myTableStyleTabNew" align="center">
            <tr>
                <td>
                    <div>
                        <button type="button" id="btnsave" class="btn btn-primary" value="Save" onclick="Edit()"><span class="glyphicon glyphicon-floppy-disk" style="color:white;"></span> Save</button>
                    </div>
                </td>
                <td>
                    <div>
                        <button type="button" class="btn btn-warning" value="Cancel" onclick="Close()"><span style="color:white;" class="glyphicon glyphicon-remove-sign"></span> Cancel</button>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <input id="hdgstnstatus" value="@Model.GSTNStatus" type="hidden"/>
}
<div id="ForPartialViewSearch"></div>
<div id="forpartialviewforsupsearch"></div>
<script type="text/javascript">
    $(document).ready(function () {

        var invotype = $("#txtClaimType").val();
        $("#ddlClaimType").val(invotype);

        var currentval = $("#txtecfcurramount").val();
        var testDecimal = testDecimals(currentval);
        if (testDecimal.length > 1) {
            currentval = currentval.slice(0, -1);
        }
        $("#txtecfcurramount").val(replaceCommas(currentval));

        var currentval1 = $("#txtecfamont").val();
        var testDecimal1 = testDecimals(currentval1);
        if (testDecimal1.length > 1) {
            currentval1 = currentval1.slice(0, -1);
        }
        $("#txtecfamont").val(replaceCommas(currentval1));
    });
    $("#txtecfcurramount").keyup(function (event) {
        if (event.which >= 37 && event.which <= 40) {
            event.preventDefault();
        }
        var currentval = $("#txtecfcurramount").val();
        var testDecimal = testDecimals(currentval);
        if (testDecimal.length > 1) {
            currentval = currentval.slice(0, -1);
        }
        $("#txtecfcurramount").val(replaceCommas(currentval));

        var parse = $("#txtecfcurramount").val();
        var parsereplace = parse.replace(/,/g, "");
        var currentvalnew = $('#txtexrate').val() * parseFloat(parsereplace);
        var currentval1 = currentvalnew.toFixed(2);
        var testDecimal1 = testDecimals(currentval1);
        if (testDecimal1.length > 1) {
            currentval1 = currentval1.slice(0, -1);
        }
        var tolnew = replaceCommas(currentval1);
        $('#txtecfamont').val(tolnew);

    });

    var objDialogySearch;
    //var posearchdetailsedit;
    var SupplierType;
    var a = parseInt(@ViewBag.SupplierType);
    $(document).ready(function () {
        debugger;
        var gststatus = $("#hdgstnstatus").val();
        $("input[name=rdogstChargedFlag][value=N]").prop("checked", true);
        if (gststatus == "Y") {
            $("input[name=rdogstChargedFlag][value=Y]").prop("checked", true);
        }
        $('#Currencyinward').change(function () {
            $("#txtexrate").val("");
            $("#txtexrate").remove('valid');
            $("#txtexrate").addClass('required');
            $("#txtecfamont").val('');
            $("#txtecfcurramount").val('');
            var brandID = $(this).val();
            var ecfdate = $("#EditInvoiceDate").val();

            var Paymode1 = $("#Currencyinward option:selected").text();
            var Paymodeid = $("#Currencyinward").val();

            if (ecfdate == null || ecfdate == "") {
                jAlert("Please Enter Invoice Date.", "Message");
                $("#EditInvoiceDate").focus();
                return false;
            }
            if (brandID == null || brandID == "0" || brandID == "-- Select --") {
                return false;
            }
            var Student =
           {
               "CurrencyName": brandID,
               "Currencyrate": ecfdate
           };
            $.ajax({
                url: '../Central/Getcurrencyrate/',
                data: JSON.stringify(Student),
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    if (data != "") {
                        $("#txtexrate").val(data);
                        $("#txtecratehd").val(data);
                        $("#CurrencyNamevalid").val(Paymode1);
                        $("#Currencyidvalid").val(Paymodeid);
                        $("#txtexrate").remove('required');
                        $("#txtexrate").addClass('valid');
                    }
                    else {
                        $("#txtexrate").val("");
                        $("#txtexrate").remove('valid');
                        $("#txtexrate").addClass('required');
                        jAlert(" Please maintain Currency Rate ", "Message");
                        return false;
                    }
                },
                error: function (result) {
                    $("#txtexrate").val("");
                    $("#txtexrate").remove('valid');
                    $("#txtexrate").addClass('required');
                    jAlert("Error", "Message");
                    return false;
                }
            });
        });

        var suppliertypeedit = $("#SupplierIdCinward option:selected").text();
        if (suppliertypeedit == "Approved") {
            $("#Suppliername").prop("readonly", true);
            $("#txtponumber1").prop("readonly", false);
            $("#supname").attr("disabled", false);
            $("#posearchicon").attr("disabled", false);
        }
        else {
            $("#supname").attr("disabled", true);
            $("#posearchicon").attr("disabled", true);
            $("#Suppliername").prop("readonly", false);
            $("#txtponumber1").prop("readonly", true);
        }

        if (a == 1) {
            $("#Approved").prop('checked', true);
        }
        else {
            $("#UnApproved").prop('checked', true);
        }
        objDialogySearch = $("[id$='ForPartialViewSearch']");
        objDialogySearch.dialog({
            autoOpen: false,
            modal: true,
            show: 'fade-in',
            close: 'fade-out',
            width: 700,
            height: 600
        });
    });
    //$("#txtecfcurramount").keyup(function (event) {

    //    var exrate = $("#txtexrate").val();
    //    var curamount = $("#txtecfcurramount").val();
    //    var curamountnew = exrate * curamount;
    //    $("#txtecfamont").val(curamountnew.toFixed(2));
    //});
    function PoSearch11() {

        var supp = $('#supplierId').val();
        var ddlClaimTypename = $("#ddlClaimType option:selected").text();
        var ddlClaimTypeid = $("#ddlClaimType").val();
        if (ddlClaimTypeid == "0" || ddlClaimTypename == "-- Select --") {
            jAlert("Please Select Invoice Type", "Information");
            return;
        }
        else if (ddlClaimTypeid == "P" || ddlClaimTypeid == "W") {
            $.ajax({
                url: '@Url.Action("posearchdetails", "Central")?id=' + supp + '&' + new Date().getTime(),
                //data: JSON.stringify(Student),
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                success: function (result) {
                    isSuccess = result;
                    if (supp == null || supp == 0) {
                        jAlert("You Can't Search Po Number", "Information");
                        return false;
                    }
                    else if (result == 0) {
                        jAlert("This Supplier Don't Have PO Number", "Information");
                        return false;
                    }
                    else {
                        var url = "@(Html.Raw(Url.Action("POSearch", "Central")))";
                        posearchdetails.load(url + '?id=' + supp);
                        posearchdetails.dialog({
                            title: 'PO  Search ', 'width': 830, show: 'fade-in', close: 'fade-out', modal: true, resizable: false, cache: false, autoOpen: false, 'height': 510
                        });
                        posearchdetails.dialog("open");
                    }
                },
            });
        }
    }

    function Searchforsupp() {

        var url = "@(Html.Raw(Url.Action("SupplierSearch", "Central")))";
        objDialogyinwardsupse.load(url + '?' + new Date().getTime());
        objDialogyinwardsupse.dialog({
            title: 'Supplier Search ', 'width': 830, show: 'fade-in', close: 'fade-out', modal: true, cache: false, resizable: false, autoOpen: false, 'height': 510
        });
        objDialogyinwardsupse.dialog("open");
    }
    function EmployeeSearch11() {

        var url = "@(Html.Raw(Url.Action("EmployeeSearch", "Central")))";
        objDialogyinwardempse.load(url + '?' + new Date().getTime());
        objDialogyinwardempse.dialog({
            title: 'Employee Search ', 'width': 830, show: 'fade-in', close: 'fade-out', modal: true, resizable: false, cache: false, autoOpen: false, 'height': 510
        });
        objDialogyinwardempse.dialog("open");
    }
    $(document).ready(function () {
        var objDate = new Date();
        var Presentyear = objDate.getFullYear();

        $("#EditRecivedDate").datepicker({
            changeMonth: true,
            changeYear: true,
            maxDate: '-id',
            dateFormat: 'dd-mm-yy',
            numberOfMonths: 1,
            onSelect: function (selected) {
                $("#EditRecivedDate").addClass('valid');
                $("#EditInvoiceDate").datepicker("option", "maxDate", selected);

            }
        });
        $("#EditInvoiceDate").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd-mm-yy',
            maxDate: '-id',
            numberOfMonths: 1,
            onSelect: function (selected) {
                $("#EditInvoiceDate").addClass('valid');
                $("#EditRecivedDate").datepicker("option", "minDate", selected);
            }
        });

        $("#txtinvoice, #txtraisercode,#invoice").keypress(function (event) {
            return isNumber(event);
        });
        $("#raisername").keypress(function (event) {
            return isAlphabet(event);
        });
        $("#suppliercode", "#Suppliername", "#InvoiceNo", "#PONO").keypress(function (event) {
            return isAlphaNumeric(event);
        });
        $("#RecivedDate", "#InvoiceDate").keypress(function (event) {
            return isDate(event);
        });
        $("#txtecfcurramount").keypress(function (event) {
            return isAmount(event);
        });
    });
    $('#Approved').change(function () {

        $("#Approved").checked == true
        {
            SupplierType = 'A';
            $("#Suppliername").attr("disabled", "disabled");
            $("#suppliercode").attr("disabled", "disabled");
            $("#supname").show();
        }
    });
    $('#UnApproved').change(function () {
        $("#UnApproved").checked == true
        {
            SupplierType = 'U';
            $("#suppliercode").attr("disabled", "disabled");
            $("#supname").hide();
            $("#Suppliername").removeAttr("disabled");
        }
    });
    function Edit() {

        var ddlClaimTypename = $("#ddlClaimType option:selected").text();
        var ddlClaimTypeid = $("#ddlClaimType").val();
        var po = $("#txtponumber1").val();
        if (ddlClaimTypeid == "0" || ddlClaimTypename == "-- Select --") {
            jAlert("Please Select Invoice Type", "Information");
            return;
        }
        if (ddlClaimTypename == "PO") {
            if (po == "") {
                jAlert("Please Select PO Ref No.", "Information");
                return false;
            }
        }
        else if (ddlClaimTypename == "WO") {
            if (po == "") {
                jAlert("Please Select PO Ref No.", "Information");
                return false;
            }
        }

        var SupType = $("#SupplierIdCinward option:selected").text();
        var employeeid = $("#EmployeeId").val();
        var RecivedDate = $("#EditRecivedDate").val();
        var Raisercode = $("#raisercode").val();
        var Raisername = $("#raisername").val();
        var SupplierCode = $("#suppliercode").val();
        var supplierId = $("#supplierId").val();
        var Suppliername = $("#Suppliername").val();
        var InvoiceDate = $("#EditInvoiceDate").val();
        var InvoiceNo = $("#EditInvoiceNo").val();
        var invoice = $("#Editinvoice").val();

        var Remarks = $("#EditRemarks").val();
        var Currency = $("#Currencyinward").val();
        var ExchangeRate = $("#txtexrate").val();
        var CurrencyAmount = $("#txtecfcurramount").val().replace(/,/g, "");
        var EcfAmount = $("#txtecfamont").val().replace(/,/g, "");
        if (Raisercode == null || Raisercode == "" || Raisername == null || Raisername == "" || Suppliername == null || Suppliername == "" || InvoiceDate == null || InvoiceDate == "" || InvoiceNo == null || InvoiceNo == "") {
            jAlert("You Can't Add Empty Values", "Information");
            return;
        }
        if (SupType == "Approved") {
            SupType = 'A';
        }
        else if (SupType == "UnApproved") {
            SupType = 'U';
        }
        if (po == null) {
            po = "";
        }
        var Student = {
            "EmployeeId": employeeid,
            "ReceivedDate": RecivedDate,
            "SupplierId": supplierId,
            "SupplierCode": SupplierCode,
            "SupplierName": Suppliername,
            "SupplierType": SupType,
            "RaiserCode": Raisercode,
            "RaiserName": Raisername,
            "InvoiceNo": InvoiceNo,
            "InvoiceDate": InvoiceDate,
            "InvoiceAmount": invoice,
            "PONo": po,
            "Remarks": Remarks,
            "Exrate": ExchangeRate,
            "Currencyrate": Currency,
            "Currencyamount": CurrencyAmount,
            "POtype": ddlClaimTypeid,
            "ECF_Amount": EcfAmount
        };
        $.ajax({
            url: '../Central/EditSupplier/',
            data: JSON.stringify(Student),
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            success: function (result) {
                isSuccess = result;
                jAlert(result, "Information", function (r) {
                    if (r == true) {
                        location.href = '../Central/Centralteaminward?' + new Date().getTime();
                        @*location.href = '@Url.Action("ClearInward", "Central")?' + new Date().getTime();*@
                    }
                });
            },
        });
    }
    $('#SupplierIdCinward').change(function () {

        var text = $("#SupplierIdCinward option:selected").text();

        if (text == "Approved") {
            $("#Suppliername").prop("readonly", true);
            $("#suppliercode").attr("readonly", true);
            //$("#posearchicon").attr("disabled", false);
            //$("#txtponumber").attr("disabled", false);
            $("#supname").attr("disabled", false);
            $("#Suppliername").val('');
        }
        else {
            $("#suppliercode").val('');
            $("#Suppliername").val('');
            $("#suppliercode").attr("readonly", true);
            $("#Suppliername").attr("readonly", false);
            //$("#txtponumber").attr("readonly", true);
            $("#supname").attr("disabled", "disabled");
            //$("#posearchicon").attr("disabled", true);
        }
    });
    $("#ddlClaimType").change(function () {
        $("#posearchicon").attr("disabled", true);
        $("#txtponumber").attr("disabled", "disabled");
        var txtContractFrom = $("#ddlClaimType").val();
        if (txtContractFrom.trim() != "0") {
            $("#ddlClaimType").removeClass('required');
            $("#ddlClaimType").addClass('valid');

            if (txtContractFrom == "P") {
                $("#txtponumber1").attr("disabled", "disabled");
                $("#posearchicon").attr("disabled", false);
            }
            else if (txtContractFrom == "W") {
                $("#txtponumber1").attr("disabled", "disabled");
                $("#posearchicon").attr("disabled", false);
            }
            else {
                $("#txtponumber1").attr("disabled", "disabled");
                $("#txtponumber1").removeClass('required');
                $("#txtponumber1").removeClass('valid');
                $("#posearchicon").attr("disabled", true);
            }
            CheckFieldsHeader();
        }
        else {
            $("#ddlClaimType").removeClass('valid');
            $("#ddlClaimType").addClass('required');
            CheckFieldsHeader();
        }
    });
    $("#txtponumber1").change(function () {
        var InwardNo = $('#txtponumber1').val()
        var Pulloutdetails = {
            "PONo": InwardNo
        };
        $.post('../Central/CheckValidInwardNo', Pulloutdetails,
            function (data) {
                if (data == "INVALID") {
                    jAlert("Invalid PO No", "Information", function (r) {
                        if (r = true) {
                            $('#btnsave').attr('disabled', true);
                            return false;
                        }
                    });
                }
                else {
                    $('#btnsave').attr('disabled', false);
                }
            }
        , 'json');
    });
    $("#EditRecivedDate").change(function () {
        var txtContractTo = $("#EditRecivedDate").val();
        if (txtContractTo.trim() != "") {
            $("#EditRecivedDate").removeClass('required');
            $("#EditRecivedDate").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#EditRecivedDate").removeClass('valid');
            $("#EditRecivedDate").addClass('required');
            CheckFieldsHeader();
        }
    });
    $("#raisercode").change(function () {
        var txtContractTo = $("#raisercode").val();
        if (txtContractTo.trim() != "") {
            $("#raisercode").removeClass('required');
            $("#raisercode").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#raisercode").removeClass('valid');
            $("#raisercode").addClass('required');
            CheckFieldsHeader();
        }
    });
    $("#raisername").change(function () {
        var txtContractTo = $("#raisername").val();
        if (txtContractTo.trim() != "") {
            $("#raisername").removeClass('required');
            $("#raisername").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#raisername").removeClass('valid');
            $("#raisername").addClass('required');
            CheckFieldsHeader();
        }
    });
    $("#suppliercode").change(function () {
        var txtContractTo = $("#suppliercode").val();
        if (txtContractTo.trim() != "") {
            $("#suppliercode").removeClass('required');
            $("#suppliercode").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#suppliercode").removeClass('valid');
            $("#suppliercode").addClass('required');

        }
    });
    $("#Suppliername").keyup(function () {
        var txtContractTo = $("#Suppliername").val();
        if (txtContractTo.trim() != "") {
            $("#Suppliername").removeClass('required');
            $("#Suppliername").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#Suppliername").removeClass('valid');
            $("#Suppliername").addClass('required');
            CheckFieldsHeader();
        }
    });
    $("#EditInvoiceDate").change(function () {
        var txtContractTo = $("#EditInvoiceDate").val();
        if (txtContractTo.trim() != "") {
            $("#EditInvoiceDate").removeClass('required');
            $("#EditInvoiceDate").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#EditInvoiceDate").removeClass('valid');
            $("#EditInvoiceDate").addClass('required');
            CheckFieldsHeader();
        }
    });
    $("#EditInvoiceNo").keyup(function () {
        var txtContractTo = $("#EditInvoiceNo").val();
        if (txtContractTo.trim() != "") {
            $("#EditInvoiceNo").removeClass('required');
            $("#EditInvoiceNo").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#EditInvoiceNo").removeClass('valid');
            $("#EditInvoiceNo").addClass('required');
            CheckFieldsHeader();
        }
    });
    $("#Editinvoice").keyup(function () {
        var txtContractTo = $("#Editinvoice").val();
        if (txtContractTo.trim() != "") {
            $("#Editinvoice").removeClass('required');
            $("#Editinvoice").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#Editinvoice").removeClass('valid');
            $("#Editinvoice").addClass('required');
            CheckFieldsHeader();
        }
    });
    $("#txtponumber1").keyup(function () {
        var txtContractTo = $("#txtponumber1").val();
        if (txtContractTo.trim() != "") {
            $("#txtponumber1").removeClass('required');
            $("#txtponumber1").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#txtponumber1").removeClass('valid');
            $("#txtponumber1").addClass('required');
            CheckFieldsHeader();
        }
    });
    $("#txtecfcurramount").keyup(function () {
        var txtContractTo = $("#txtecfcurramount").val();
        if (txtContractTo.trim() != "") {
            $("#txtecfcurramount").removeClass('required');
            $("#txtecfcurramount").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#txtecfcurramount").removeClass('valid');
            $("#txtecfcurramount").addClass('required');
            CheckFieldsHeader();
        }
    });
    function suppliertype() {
        var txtContractTo = $("#SupplierIdCinward option:selected").text();
        if (txtContractTo.trim() != "") {
            $("#SupplierIdCinward").removeClass('required');
            $("#SupplierIdCinward").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#SupplierIdCinward").removeClass('valid');
            $("#SupplierIdCinward").addClass('required');
        }
    }
    function CheckFieldsHeader() {

        var ErrCount = 0;
        if ($("#EditRecivedDate").val().trim() == "" || $("#EditRecivedDate").val() == null) {
            ErrCount = 1;
        }
        if ($("#raisercode").val().trim() == "" || $("#raisercode").val() == null) {
            ErrCount = 2;
        }
        if ($("#raisername").val().trim() == "" || $("#raisername").val() == null) {
            ErrCount = 3;
        }
        if ($("#Suppliername").val().trim() == "" || $("#Suppliername").val() == null) {
            ErrCount = 5;
        }
        if ($("#EditInvoiceDate").val().trim() == "" || $("#EditInvoiceDate").val() == null) {
            ErrCount = 6;
        }
        if ($("#EditInvoiceNo").val().trim() == "" || $("#EditInvoiceNo").val() == null) {
            ErrCount = 7;
        }
        if ($("#txtecfcurramount").val() == "" || $("#txtecfcurramount").val() == null) {
            ErrCount = 8;
        }
        //if ($("#Editinvoice").val().trim() == "" || $("#Editinvoice").val() == null) {
        //    ErrCount = 8;
        //}
        if ($("#SupplierIdCinward").val().trim() == "" || $("#SupplierIdCinward").val() == null || $("#SupplierIdCinward").val() == "-----Select-----") {
            ErrCount = 9;
        }
        if ($("#ddlClaimType").val() == "0" || $("#ddlClaimType").val() == null) {
            ErrCount = 10;
        }
        if (ErrCount == 0) {
            $("#btnsave").removeAttr('disabled');
        }
        else {
            $("#btnsave").attr('disabled', 'disabled');
        }
    }
    function checkdate() {
        var txtContractTo = $("#EditRecivedDate").val();
        if (txtContractTo.trim() != "") {
            $("#EditRecivedDate").removeClass('required');
            $("#EditRecivedDate").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#EditRecivedDate").removeClass('valid');
            $("#EditRecivedDate").addClass('required');
            CheckFieldsHeader();
        }
    }
    function checkdateinvoice() {
        var txtContractTo = $("#EditInvoiceDate").val();
        if (txtContractTo.trim() != "") {
            $("#EditInvoiceDate").removeClass('required');
            $("#EditInvoiceDate").addClass('valid');
            CheckFieldsHeader();
        }
        else {
            $("#EditInvoiceDate").removeClass('valid');
            $("#EditInvoiceDate").addClass('required');
            CheckFieldsHeader();
        }
    }
    function Close() {
        objDialogyCentral.remove();
    }
</script>
