@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/Rmax_Site.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.min.js")" type="text/javascript"></script>
<script src="~/Scripts/angular.min.js"></script>
<script src="~/Scripts/asms/ui-bootstrap-tpls-0.11.0.js"></script>
<script>

    $(document).ready(function () {
        $("#txtctreport").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd-mm-yy',
            maxDate: '-id',
        });

        $("#txtPaidDate").datepicker({  //For Paid DATE  @*selva*@
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd-mm-yy',
            maxDate: '-id',
        });

        $("#textinvdate").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd-mm-yy',
            maxDate: '-id',
        });

        $("#ReceivedDateFrom").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd-mm-yy',
            maxDate: '-id',
        });

        $("#ReceivedDateTo").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd-mm-yy',
            maxDate: '-id',
        });

        $("#InvoiceDateFrom").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd-mm-yy',
            maxDate: '-id',
        });

        $("#InvoiceDateTo").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'dd-mm-yy',
            maxDate: '-id',
        });

    });
    $(document).keydown(function (e) {
        if (e.keyCode == 8 && e.target.tagName != 'INPUT' && e.target.tagName != 'TEXTAREA')
            e.preventDefault();
    });
</script>

<div class="pageHeadingLayout">
    <span class="pageHeading">Inward Search Report</span>
</div>
<div class="well" ng-app="myApp" style="padding: 1px 1px 0px 1px;" >
    
    <div ng-app="myApp" ng-controller="PageCtrl">
        <table class="myTableStyleTabNew" align="left">
            <tr>
                <td>
                    <span>Received Date From</span>
                    <br />
                    <input type="text"
                           id="ReceivedDateFrom"
                           name="ReceivedDateFrom"
                           value="@ViewBag.ReceivedDateFrom"
                           class="textboxStyle"
                           style="width: 113px;" />
                </td>
                <td>
                    <span>Received Date To</span>
                    <br />
                    <input type="text"
                           id="ReceivedDateTo"
                           name="ReceivedDateTo"
                           value="@ViewBag.ReceivedDateTo"
                           class="textboxStyle"
                           style="width: 107px;" />
                </td>
                <td>
                    <span>Invoice Date From</span>
                    <br />
                    <input type="text"
                           id="InvoiceDateFrom"
                           name="InvoiceDateFrom"
                           value="@ViewBag.InvoiceDateFrom"
                           class="textboxStyle"
                           style="width: 113px;" />
                </td>
                <td>
                    <span>Invoice Date To</span>
                    <br />
                    <input type="text"
                           id="InvoiceDateTo"
                           name="InvoiceDateTo"
                           value="@ViewBag.InvoiceDateTo"
                           class="textboxStyle"
                           style="width: 107px;" />
                </td>

                <td>
                    <span>Status</span>
                    <br />

                    <select style="width:113px; height:30px;" name="ddlStatus" id="ddlStatus" class="form-control">
                        <option value="S">---Select---</option>
                        <option value="All">All</option>
                        <option value="CT - Submission">CT - Submission</option>
                        <option value="CT Draft">CT Draft</option>
                        <option value="CT - Hold">CT - Hold</option>
                        <option value="CT - Hold Released">CT - Hold Released</option>
                        <option value="CT - Return Back">CT - Return Back</option>
                        <option value="CT - Submitted">CT - Submitted</option>
                        <option value="CT – Raiser Reviewed">CT – Raiser Reviewed</option>
                        <option value="CT - Rejected">CT - Rejected</option>
                        <option value="Raiser - Rejected">Raiser - Rejected</option>
                        <option value="Inprocess">Inprocess</option>
                        <option value="Approved">Approved</option>
                        <option value="Rejected">Rejected</option>
                        <option value="EPUInproces">EPUInproces</option>
                        <option value="EPURejected">EPURejected</option>
                        <option value="Paid">Paid</option>
                        <option value="Hold">Hold</option>

                    </select>

                </td>

                <td>
                    <span>Invoice No</span>
                    <br />
                    <input type="text"
                           name="InvoiceNo"
                           id="InvoiceNo"
                           value="@ViewBag.InvoiceNo"
                           class="textboxStyle"
                           @*readonly="readonly"*@
                           style="width: 150px;" />
                </td>
                <td>
                    <span>Ecf No</span>
                    <br />
                    <input type="text"
                           name="Ecfno"
                           id="Ecfno"
                           value="@ViewBag.Ecfno"
                           class="textboxStyle"
                           @*readonly="readonly"*@
                           style="width: 160px;" />
                </td>
            </tr>
        </table>
        <table class="myTableStyleTabNew" align="right">
            <tr>
                <td valign="top">
                    <button class="btn btn-primary" id="btnSearch" value="Search" name="command" ng-click="Search('Submit')" style=" margin-top:0px;color:white;"><span style="color:white;" class="glyphicon glyphicon-search"></span> Search</button>
                </td>
                @*<td>
                        <button class="btn btn-primary" id="btnrefresh" value="Refresh" name="command" type="submit" style="margin-top:0px;"><span style="color:white;" class="glyphicon glyphicon-refresh"></span> Refresh</button>
                    </td>*@
                <td>
                    <button class="btn btn-primary" id="btnclear" value="Clear" name="command" type="button" ng-click="clearMe()" style="margin-top:0px;"><span style="color:white;" class="glyphicon glyphicon-remove-circle"></span> Clear</button>
                </td>

            </tr>
        </table>
        <div>
            <div>
                <div>
                    <table class="tableSmall table-bordered table-hover table-responsive tablefix" style="width:100%;font-family:Tahoma;">
                        <thead style="width:100%;">
                            <tr>
                                <th class="thfix" style="display:none;">
                                    queue Gid
                                </th>
                                <th class="thfix" style="display:none;">
                                    inward Gid
                                </th>
                                <th class="thfix" style="display:none;">
                                    ctstatus
                                </th>
                                <th class="thfix" style="display:none;">
                                    ecf Gid
                                </th>
                                <th class="thfix" style="width:9.2%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'ReceivedDate'; sortReversemyreq = !sortReversemyreq">
                                        Received Date
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'ReceivedDate' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'ReceivedDate' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input title="Select Received Date" id="txtctreport" type="text" class="textboxStyle" ng-model="search.ReceivedDate">
                                </th>
                                <th class="thfix" style="width:9.2%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'SupplierName'; sortReversemyreq = !sortReversemyreq">
                                        Supplier Name
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'SupplierName' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'SupplierName' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input title="Enter Supplier Name" type="text" class="textboxStyle" ng-model="search.SupplierName">
                                </th>
                                <th class="thfix" style="width:8.2%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'RaiserName'; sortReversemyreq = !sortReversemyreq">
                                        Raiser
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'RaiserName' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'RaiserName' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input title="Enter Raiser Name" type="text" class="textboxStyle" ng-model="search.RaiserName">
                                </th>
                                <th class="thfix" style="width:8.2%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'EmployeeDepartment'; sortReversemyreq = !sortReversemyreq">
                                        Department
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'EmployeeDepartment' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'EmployeeDepartment' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input title="Enter Supplier Name" type="text" class="textboxStyle" ng-model="search.EmployeeDepartment">
                                </th>
                                <th class="thfix" style="width:9.4%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'Docno'; sortReversemyreq = !sortReversemyreq">
                                        ECF No
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'Docno' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'Docno' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input title="Enter Supplier Name" type="text" class="textboxStyle" ng-model="search.Docno">
                                </th>
                                <th class="thfix" style="width:8.2%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'empName'; sortReversemyreq = !sortReversemyreq">
                                        CT Maker
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'empName' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'empName' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input title="Enter Supplier Name" type="text" class="textboxStyle" ng-model="search.empName">
                                </th>
                                <th class="thfix" style="width:7.4%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'InvoiceDate'; sortReversemyreq = !sortReversemyreq">
                                        Inv Date
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'InvoiceDate' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'InvoiceDate' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input id="textinvdate" title="Enter Invoice Date" type="text" class="textboxStyle" ng-model="search.InvoiceDate">
                                </th>
                                <th class="thfix" style="width:7.4%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'InvoiceNo'; sortReversemyreq = !sortReversemyreq">
                                        Inv No
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'InvoiceNo' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'InvoiceNo' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input title="Enter Invoice No." type="text" class="textboxStyle" ng-model="search.InvoiceNo">
                                </th>
                                <th class="thfix" style="width:7.4%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'InvoiceAmount'; sortReversemyreq = !sortReversemyreq">
                                        Inv Amount
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'InvoiceAmount' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'InvoiceAmount' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input id="txtAmountINV" title="Enter Invoice Amount" type="text" class="textboxStyle" ng-model="search.InvoiceAmount">
                                </th>
                                @*selva*@
                                <th class="thfix" style="width:9.2%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'PaidDate'; sortReversemyreq = !sortReversemyreq">
                                        Paid Date
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'PaidDate' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'PaidDate' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input title="Select Received Date" id="txtPaidDate" type="text" class="textboxStyle" ng-model="search.PaidDate">
                                </th>
                                @*selva*@


                                @*Pvnumber*@
                                <th class="thfix" style="width:9.2%">
                                    <a style="text-decoration: none;" href="#" ng-click="sortTypemyreq = 'PVnumber'; sortReversemyreq = !sortReversemyreq">
                                        PV
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'PVnumber' && !sortReversemyreq" class="glyphicon glyphicon-chevron-down"></span>
                                        <span style="font-size: 12px;color:white;" ng-show="sortTypemyreq == 'PVnumber' && sortReversemyreq" class="glyphicon glyphicon-chevron-up"></span>
                                    </a>
                                    <br />
                                    <input title="Select Received Date" id="txtPVnumber" type="text" class="textboxStyle" ng-model="search.PVnumber">
                                </th>


                                <th class="thfix" style="width:7.4%">
                                    Status<br />
                                    <select class="textboxStyle" ng-model="search.ecfstatus" title="Select Status">
                                        <option value="">ALL</option>
                                        <option value="CT - Submission">CT - Submission</option>
                                        <option value="CT Draft">CT Draft</option>
                                        <option value="CT - Hold">CT - Hold</option>
                                        <option value="CT - Hold Released">CT - Hold Released</option>
                                        <option value="CT - Return Back">CT - Return Back</option>
                                        <option value="CT - Submitted">CT - Submitted</option>
                                        <option value="CT – Raiser Reviewed">CT – Raiser Reviewed</option>
                                        <option value="CT - Rejected">CT - Rejected</option>
                                        <option value="Raiser - Rejected">Raiser - Rejected</option>
                                        <option value="Inprocess">Inprocess</option>
                                        <option value="Approved">Approved</option>
                                        <option value="Rejected">Rejected</option>
                                        <option value="EPUInproces">EPUInproces</option>
                                        <option value="EPURejected">EPURejected</option>
                                        <option value="Paid">Paid</option>
                                        <option value="Hold">Hold</option>
                                    </select>
                                </th>
                                <th class="thfix">
                                    Remarks
                                    <br />
                                    <input type="text" title="Enter Remarks" class="textboxStyle" ng-model="search.Remarks">
                                </th>
                                <th class="thfix" style="width:7.1%;">Action</th>
                            </tr>
                        </thead>
                    </table>
                    @*selva*@
                    <div style="height: 600px;overflow-y: scroll;">
                        <table class="tableSmall table-bordered table-hover table-responsive tablefix" style="width:100%;table-layout: fixed;font-family:Tahoma;">
                            <tbody ng-show="filtered.length!=0" ng-repeat="item in filtered = items| orderBy:sortTypemyreq:sortReversemyreq | filter:search | startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit" style="width:100%;">
                                <tr>
                                    <td class="tdfix" style="display:none;">
                                        {{item.queue_gid}}
                                    </td>
                                    <td class="tdfix" style="display:none;">
                                        {{item.InwardId}}
                                    </td>
                                    <td class="tdfix" style="display:none;">
                                        {{item.emporsupp}}
                                    </td>
                                    <td class="tdfix" style="display:none;">
                                        {{item.maingid}}
                                    </td>
                                    <td title="{{item.ReceivedDate}}" class="tdfix" style="width:8.1%;overflow: hidden;">
                                        <span> {{item.ReceivedDate}}</span>
                                    </td>
                                    <td title="{{item.SupplierName}}" class="tdfix" style="width:9.24%;overflow: hidden;">
                                        <span> {{item.SupplierName}}</span>
                                    </td>
                                    <td title="{{item.RaiserName}}" class="tdfix" style="width:8.32%;overflow: hidden;">
                                        <span> {{item.RaiserName}}</span>
                                    </td>
                                    <td title="{{item.EmployeeDepartment}}" class="tdfix" style="width:8.1%;overflow: hidden;">
                                        <span> {{item.EmployeeDepartment}}</span>
                                    </td>
                                    <td title="{{item.Docno}}" class="tdfix" style="width:8.43%;overflow: hidden;">
                                        <span> {{item.Docno}}</span>
                                    </td>
                                    <td title="{{item.empName}}" class="tdfix" style="width:8.37%;overflow: hidden;">
                                        <span> {{item.empName}}</span>
                                    </td>
                                    <td title="{{item.InvoiceDate}}" class="tdfix" style="width:6.48%;overflow: hidden;">
                                        <span>{{item.InvoiceDate}}</span>
                                    </td>
                                    <td title="{{item.InvoiceNo}}" class="tdfix" style="width:7.20%;overflow: hidden;">
                                        <span> {{item.InvoiceNo}}</span>
                                    </td>
                                    <td title="{{item.InvoiceAmount}}" class="tdfix" style="width:7.1%;overflow: hidden;">
                                        <span> {{item.InvoiceAmount}}</span>
                                    </td>

                                    <td title="{{item.PaidDate}}" class="tdfix" style="width:8.2%;overflow: hidden;">
                                        <span> {{item.PaidDate}}</span>  @*selva*@
                                    </td>
                                    <td title="{{item.PVnumber}}" class="tdfix" style="width:9.2%;overflow: hidden;">
                                        <span> {{item.PVnumber}}</span>
                                    </td>

                                    <td title="{{item.ecfstatus}}" class="tdfix" style="width:4.5%;overflow: hidden;">
                                        <span> {{item.ecfstatus}}</span>
                                    </td>
                                    <td title="{{item.Remarks}}" class="tdfix" style="width:2.2%;overflow: hidden;">
                                        <span> {{item.Remarks}}</span>
                                    </td>


                                    <td class="tdfix" style="width:4.8%;" align="center">
                                        <a title="View"> <span class="glyphicon glyphicon-eye-open" onclick="ReportLogRaiseView(this)"></span></a>
                                        &nbsp;<a title="Log"> <span class="glyphicon glyphicon-book" onclick="ReportLogView(this)"></span></a>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot ng-show="filtered.length==0">
                                <tr>
                                    <td colspan="16" style="text-align:left;"><div class="gridMessage" style="width:100%; border:none;"><center>No Records Found</center></div></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div ng-show="filtered.length>0">
                        <table style="width:100%;">
                            <tr>
                                <td style="padding-left:10px" align="left"> <div class="gridCount" style="text-align:left; font-size:14px;">Total Records : {{totalItems}} of {{filtered.length}}</b></div></td>
                                <td align="right">
                                    <pagination total-items="totalItems"
                                                ng-model="currentPage"
                                                page="currentPage"
                                                max-size="noofsetpages"
                                                boundary-links="true"
                                                items-per-page="entryLimit" class="pagination-sm" style="cursor:pointer;">
                                    </pagination>
                                </td>
                                <td align="right" style="padding-right:1.2%;width:9%;padding-bottom:6px">
                                    &nbsp;&nbsp;&nbsp;&nbsp;  <a style="height: 27px;padding-top: 2px;color:white;font-size:13px;" class="btn btn-primary glyphicon glyphicon-export" data-modal="" href="../Central/downloadsexcel" id="reportDownloadExcel">
                                        Excel
                                    </a>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div style="padding:2px;" id="ForPartialViewecfview"></div>
<div style="padding:2px;" id="ForPartialViewcentral"></div>
<script>
    $("#txtAmountINV").keyup(function (event) {
        if (event.which >= 37 && event.which <= 40) {
            event.preventDefault();
        }

        var currentval = $("#txtAmountINV").val();
        var testDecimal = testDecimals(currentval);
        if (testDecimal.length > 1) {
            currentval = currentval.slice(0, -1);
        }
        $("#txtAmountINV").val(replaceCommas(currentval));

    });

    function testDecimals(currentval) {
        var count;
        currentval.match(/\./g) === null ? count = 0 : count = currentval.match(/\./g);
        return count;
    }
    function replaceCommas(yourNumber) {
        var components = yourNumber.toString().split(".");
        if (components.length === 1)
            components[0] = yourNumber;
        components[0] = components[0].replace(/\D/g, "").replace(/(\d)(?=(\d\d)+\d$)/g, "$1,");
        if (components.length === 2)
            components[1] = components[1].replace(/\D/g, "");
        return components.join(".");
    }
    var app = angular.module('myApp', ['ui.bootstrap']);
    app.filter('startFrom', function () {
        return function (input, start) {
            if (input) {
                start = +start;
                return input.slice(start);
            }
            return [];
        };
    });

    app.controller('PageCtrl', ['$scope', '$http', 'filterFilter', function ($scope, $http, filterFilter) {


        GetInwardSearchReport();
        $scope.Search = function (searchtype) {
          
            GetInwardSearchReport(searchtype);
           
        };
        $scope.clearMe = function () {
            $scope.items = null;
            $('#ReceivedDateFrom').val("");
            $('#ReceivedDateTo').val("");
            $('#InvoiceDateFrom').val("");
            $('#InvoiceDateTo').val("");
            $('#ddlStatus').val("S");
            $('#InvoiceNo').val("");
            $('#Ecfno').val("");
        };

        function GetInwardSearchReport(searchtype) {

            var ReceivedDateFrom = $('#ReceivedDateFrom').val();
            var ReceivedDateTo = $('#ReceivedDateTo').val();
            var InvoiceDateFrom = $('#InvoiceDateFrom').val();
            var InvoiceDateTo = $('#InvoiceDateTo').val();
            var Status = $('#ddlStatus').val();
            var InvoiceNo = $('#InvoiceNo').val();
            var Ecfno = $('#Ecfno').val();

            if (ReceivedDateFrom == undefined || ReceivedDateFrom == null) {
                ReceivedDateFrom = "";
            }
            if (ReceivedDateTo == undefined || ReceivedDateTo == null) {
                ReceivedDateTo = "";
            }
            if (Status == 'All') {

                if (ReceivedDateFrom == '' || ReceivedDateTo == '') {
                    jAlert("Please Select Received Date", "Error", function () {
                        return false;
                    });
                    return false;

                }
              
           }
            if (Status == undefined || Status == null) {
                Status = "";
            }
            if (Ecfno == undefined || Ecfno == null) {
                Ecfno = "";
            }
            if (InvoiceNo == undefined || InvoiceNo == null) {
                InvoiceNo = "";
            }
            if (searchtype == undefined || searchtype == null) {
                searchtype = "";
            }
            $scope.ReceivedDateFrom = ReceivedDateFrom;
            $scope.ReceivedDateTo = ReceivedDateTo;
            $scope.InvoiceDateFrom = InvoiceDateFrom;
            $scope.InvoiceDateTo = InvoiceDateTo;
            $scope.Status = Status;
            $scope.Ecfno = Ecfno;
            $scope.InvoiceNo = InvoiceNo;
            $scope.searchtype = searchtype;
            showProgress();
            $http.get("../Central/ToGetinwardrpt?ReceivedDateFrom=" + $scope.ReceivedDateFrom + "&ReceivedDateTo=" + $scope.ReceivedDateTo + "&InvoiceDateFrom=" + $scope.InvoiceDateFrom + "&InvoiceDateTo=" + $scope.InvoiceDateTo + "&Ecfno=" + $scope.Ecfno + "&InvoiceNo=" + InvoiceNo + "&Status=" + $scope.Status + "&searchtype=" + searchtype)
                .then(function (response) {               
                    hideProgress();
             $scope.items = response.data.qrylist;
             $scope.search = {};
             $scope.resetFilters = function () {
                 $scope.search = {};
             };
             $scope.currentPage = 1;
             $scope.totalItems = $scope.items.length;
             $scope.entryLimit = 50;
             $scope.noOfPages = Math.ceil($scope.totalItems / $scope.entryLimit);
             $scope.noofsetpages = 5;
             $scope.$watch('search', function (newVal, oldVal) {
                 $scope.filtered = filterFilter($scope.items, newVal);
                 $scope.totalItems = $scope.filtered.length;
                 $scope.noOfPages = Math.ceil($scope.totalItems / $scope.entryLimit);
                 $scope.currentPage = 1;
                 $scope.noofsetpages = 5;
             }, true);
            
                }); 
            
        }
       
    }]);

    function Saveecflogviews() {
        window.parent.jQuery('#ForPartialViewcentral').dialog('close');
    }
    var objDialogyecfview;
    $(document).ready(function () {
        objDialogyecfview = $("[id$='ForPartialViewecfview']");
        objDialogyecfview.dialog({
            autoOpen: false,
            modal: true,
            show: 'fade-in',
            close: 'fade-out',
            width: 500,
            height: 500
        });
    });
    var objDialogyCentral;
    $(document).ready(function () {
        objDialogyCentral = $("[id$='ForPartialViewcentral']");
        objDialogyCentral.dialog({
            autoOpen: false,
            modal: true,
            show: 'fade-in',
            close: 'fade-out',
            width: 500,
            height: 500
        });
    });


    function ReportLogView(element) {
        var row = $(element).closest('tr');
        var ecfnumststus = row.find('td:eq(2)').text();
        ecfnumststus = ecfnumststus.toString().trim();

        if (ecfnumststus == "0" || ecfnumststus == "2" || ecfnumststus == "4" || ecfnumststus == "8") {
            var ecfnum = row.find('td:eq(1)').text();
            ecfnum = ecfnum.toString().trim();
            var url = '@Url.Action("ReportLogView", "Central")?id=' + ecfnum + '&' + new Date().getTime();
            objDialogyCentral.load(url);
            objDialogyCentral.dialog({ title: 'Details & Log', width: '900', height: '500' });
            objDialogyCentral.dialog("open");
        }
        else {
            var ecfnum = row.find('td:eq(0)').text();
            ecfnum = ecfnum.toString().trim();
            var ecfnume = row.find('td:eq(3)').text();
            ecfnume = ecfnume.toString().trim();
            var ecfstatusnew = row.find('td:eq(13)').text();
            ecfstatusnew = ecfstatusnew.toString().trim();

            if (ecfstatusnew == "Paid" || ecfstatusnew == "EPURejected" || ecfstatusnew == "EPUInproces" || ecfstatusnew == "Audit Maker" || ecfstatusnew == "Audit Checker" || ecfstatusnew == "Authorized") {
                var statustype = "";
                if (ecfstatusnew == "EPUInproces" || ecfstatusnew == "Audit Maker" || ecfstatusnew == "Audit Checker" || ecfstatusnew == "Authorized") {
                    statustype = "0";
                }
                else if (ecfstatusnew == "EPURejected") {
                    statustype = "1";
                }
                else if (ecfstatusnew == "Paid") {
                    statustype = "2";
                }
                window.open("../MyDashDocdetails/FSDashboardLink?EcfGid=" + ecfnume + '&EcfStatus=' + statustype + '&' + new Date().getTime(), "_blank");
            }
            else if (ecfstatusnew == "CT Draft") {
                var url = '@Url.Action("LogViewecf", "Central")?id=' + ecfnume + '&types=D&ecfstsus=CTDraft&' + new Date().getTime();
                objDialogyecfview.load(url);
                objDialogyecfview.dialog({ title: 'ECF Details View', width: '1245', height: '700' });
                objDialogyecfview.dialog("open");
            }
            else {
                var url = '@Url.Action("LogViewecf", "Central")?id=' + ecfnum + '&types=A&ecfstsus=Inprocess&' + new Date().getTime();
                objDialogyecfview.load(url);
                objDialogyecfview.dialog({ title: 'ECF Details View', width: '1245', height: '700' });
                objDialogyecfview.dialog("open");
            }
        }


    }
    function ReportLogRaiseView(element) {
        var row = $(element).closest('tr');
        var ecfnum = row.find('td:eq(1)').text();
        ecfnum = ecfnum.toString().trim();

        var url = '@Url.Action("ReportInwardView", "Central")?id=' + ecfnum + '&' + new Date().getTime();
        objDialogyCentral.load(url);
        objDialogyCentral.dialog({ title: 'Details & Log', width: '1130', height: '350' });
        objDialogyCentral.dialog("open");
    }
    function Saveecflogvieiws() {
        //objDialogyecfview.dialog("close");
        window.parent.jQuery('#ForPartialViewecfview').dialog('close');
    }
</script>
