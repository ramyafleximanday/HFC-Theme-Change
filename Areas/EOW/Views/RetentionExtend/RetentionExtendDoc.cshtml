@model IEM.Areas.EOW.Models.Eow_RetentionExtend
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.min.js")" type="text/javascript"></script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <span style="color: #02A3FB">ECF</span>
    <br />
    <br />
    <div class="input-append">
        <table class="myTableStyleTabNew">

            <tr>
                <td>
                    <span>ECF Date</span>
                    <div class="input-append">
                        <input type="date"
                               name="filter_name1"
                               id="txtFilterName1"
                               value="@Model.ecf_date"
                               class="textboxStyle valid"
                               readonly="readonly"
                               style="display: block; width:162px; "
                               maxlength="10" />
                        <input type="text" id="tempinvoicegid" value="@Model.invoice_gid" style="display:none" />
                    </div>
                </td>
                <td>
                    <span>ECF Amount</span>
                    <input type="text"
                           name="ECFAmount"
                           id="txtECFAmountId"
                           value="@Model.ecf_amount" maxlength="9"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>ECF No</span>
                    <input type="text"
                           name="ECFNo"
                           id="txtECFNoId"
                           value="@Model.ecf_no" maxlength="16"
                           class="textboxStyle"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>

            </tr>
            <tr>
                <td>
                    <span>Supplier Code</span>
                    <input type="text"
                           name="Suppliercode"
                           id="txtSuppliercode"
                           value="@Model.supplierheader_suppliercode" maxlength="16"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Supplier Name</span>
                    <input type="text"
                           name="Suppliername"
                           id="txtSuppliername"
                           value="@Model.supplierheader_name" maxlength="128"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>ECF Remark</span>
                    <input type="text"
                           name="ECFRemark"
                           id="txtECFRemarkId"
                           value="@Model.ecf_remark" maxlength="255"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
            </tr>
        </table>
    </div>
    <br/>   
    <span style="color: #02A3FB">Invoice</span>
    <br />
    <br />
    <div class="input-append">
        <table class="myTableStyleTabNew">


            <tr>
                <td>
                    <span>Invoice Date</span>
                    <input type="text"
                           name="Suppliercode"
                           id="txtSuppliercode"
                           value="@Model.invoice_date" maxlength="4"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Invoice No</span>
                    <input type="text"
                           name="Suppliername"
                           id="txtSuppliername"
                           value="@Model.invoice_no" maxlength="32"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Invoice Amount</span>
                    <input type="text"
                           name="ECFRemark"
                           id="txtECFRemarkId"
                           value="@Model.invoice_amount" maxlength="9"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
            </tr>
            <tr>
                <td>
                    <span>Invoice Description</span>
                    <input type="text"
                           name="Suppliercode"
                           id="txtSuppliercode"
                           value="@Model.invoice_desc" maxlength="128"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Retention Date</span>
                    <input type="text"
                           name="Suppliername"
                           id="txtretentiondate"
                           value="@Model.invoice_retention_releaseon" maxlength="4"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Retention Amount</span>
                    <input type="text"
                           name="ECFRemark"
                           id="txtretentioamount"
                           value="@Model.invoice_retention_amount" maxlength="9"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Balance Amount</span>
                    <input type="text"
                           name="ECFRemark"
                           id="txtECFRemarkId"
                           value="@Model.invoice_retention_exception" maxlength="9"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
            </tr>
        </table>
    </div>
    <br/>
    <br/>
    <span style="color: #02A3FB">Retention Release</span>
    <br />

    <div class="input-append">
        <table class="myTableStyleTabNew">
            <tr>
                <td>
                    <span>Release Extend Date</span>
                    <input type="text"
                           name="Suppliercode"
                           id="txtreleasextenddate"
                           value="@ViewBag.releasedate" maxlength="4"
                           class="textboxStyle required"
                           style="display: block;width:162px; " />
                </td>
               
                <td>
                    <span>Remarks</span>
                    <input type="text"
                           name="ECFRemark"
                           id="txtretentionremark"
                           value="@ViewBag.remarks" maxlength="255"
                           class="textboxStyle required"
                           style="display: block;width:331px; " />
                </td>
            </tr>
        </table>
    </div>
     <div>
            <table class="myTableStyleTabNew" align="center">
                <tr>
                    <td style="padding-top:27px;">
                        <div>
                            <button type="button" id="_save"  value="Save" onclick="SAVE()" class="btn btn-primary"><span class="glyphicon glyphicon-floppy-disk" style="color:white;"></span> Save</button>
                        </div>
                    </td>
                    <td style="padding-top:27px;">
                        <div>
                            <button type="button" value="Cancel" class="btn btn-warning" onclick="GotoIndex()"><span style="color:white;" class="glyphicon glyphicon-remove-sign"></span> Cancel</button>
                        </div>
                    </td>
                </tr>
            </table>
        </div>   
}
<script type="text/javascript">
    $("#txtreleasextenddate").datepicker({
        changeMonth: true,
        changeYear: true,
        //maxDate: '-id',
        dateFormat: 'dd-mm-yy'
    });

    function SAVE() {
        var invoicegid = $("#tempinvoicegid").val().trim();
        var retentiondate = $("#txtretentiondate").val().trim();
        var retentionamount = $("#txtretentioamount").val().trim();
        var retentionextenddate = $("#txtreleasextenddate").val().trim();
        var retentionremark = $('#txtretentionremark').val().trim();

        var retentiondetails =
            {
            "invoice_gid": invoicegid, "invoice_retention_releaseon": retentiondate,
            "invoice_retention_amount": retentionamount, "retention_expiry": retentionextenddate,
            "remarks": retentionremark
           };
        $.post('../RetentionExtend/InsertExtendDetails', retentiondetails,
            function (data) {
                if (data =="Success") {
                    jAlert("Record Extented Successfully!!!", "Information", function (r) {
                        if (r = true) { location = '../RetentionExtend/Index'; }
                    });
                }
                else {
                    jAlert("Record Doesn't Extend !", "Information", function (r) {
                        if (r = true) { return false; }
                    });
                }
            }
        , 'json');
    }
    function GotoIndex()
    {
        window.parent.jQuery('#ForPartialViewretentionextend').dialog('close');
    }

    $(document).ready(function () {       
        //$("#txtreleasextenddate").change(function () {
        //    var retentiondate = $("#txtretentiondate").val().trim();
        //    var retentionextenddate = $("#txtreleasextenddate").val().trim();
        //    if(retentionextenddate<retentiondate)
        //    {
        //        jAlert("Invalid Date", "Information", function (r) {
        //            if (r = true) {
        //                $('#_save').attr('disabled', true);
        //                return false;

        //            }
        //        });
        //    }
        //    else
        //    {
        //        $('#_save').attr('disabled', false);
        //        //location = location.href();
        //    }
        //});
    });

 </script>
