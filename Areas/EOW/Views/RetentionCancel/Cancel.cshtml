@model IEM.Areas.EOW.Models.RetentionCancelData
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.min.js")" type="text/javascript"></script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <span style="color:#02A3FB">ECF</span>
    <br />
    <br />
    <div class="input-append">
        <table class="myTableStyleTabNew">
            <tr>
                <td>
                    <span>ECF Date</span>
                    
                        <input type="date"
                               name="filter_name1"
                               id="txtFilterName1"
                               value="@Model.ecf_date"
                               class="textboxStyle valid"
                               style="display: block; width:162px; "
                               readonly="readonly"
                               maxlength="10" />
                    
                </td>
                <td>
                    <span>ECF Amount</span>
                    <input type="text"
                           name="ECFAmount"
                           id="txtECFAmountId"
                           value="@Model.ecf_amount" maxlength="9"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>ECF No</span>
                    <input type="text"
                           name="ECFNo"
                           id="txtECFNoId"
                           value="@Model.ecf_no" maxlength="16"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>

            </tr>
            <tr>
                <td>
                    <span>Supplier Code</span>
                    <input type="text"
                           name="Suppliercode"
                           id="txtSuppliercode"
                           value="@Model.ecf_suppliercode" maxlength="16"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Supplier Name</span>
                    <input type="text"
                           name="Suppliername"
                           id="txtSuppliername"
                           value="@Model.ecf_suppliername" maxlength="128"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>ECF Remark</span>
                    <input type="text"
                           name="ECFRemark"
                           id="txtECFRemarkId"
                           value="@Model.Remarks"
                           maxlength="255"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
            </tr>
        </table>
    </div>
    <span style="color:#02A3FB">Invoice</span>
    <br />
    <br />
    <div class="input-append">
        <table class="myTableStyleTabNew">
            <tr>
                <td>
                    <span>Invoice Date</span>
                    <input type="text"
                           name="Suppliercode"
                           id="txtSuppliercode"
                           value="@Model.invoice_date" maxlength="4"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Invoice No</span>
                    <input type="text"
                           name="Suppliername"
                           id="txtSuppliername"
                           value="@Model.invoice_no" maxlength="32"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Invoice Amount</span>
                    <input type="text"
                           name="ECFRemark"
                           id="txtECFRemarkId"
                           value="@Model.invoice_amount" maxlength="9"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
            </tr>
            <tr>
                <td>
                    <span>Invoice Description</span>
                    <input type="text"
                           name="Suppliercode"
                           id="txtSuppliercode"
                           value="@Model.invoice_description" maxlength="128"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Retention Date</span>
                    <input type="text"
                           name="Retention_date"
                           id="Retention_date"
                           value="@Model.Retention_date" maxlength="4"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Retention Amount</span>
                    <input type="text"
                           name="ECFRemark"
                           id="RetentionAmountId"
                           value="@Model.Retention_Amount" maxlength="9"
                           class="textboxStyle valid"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
                </tr>
            <tr>
                <td>
                    <span>Balance Amount</span>
                    <input type="text"
                           name="BalanceAmount"
                           id="txtBalanceAmountId"
                           value="@Model.Balance_Amount"
                           maxlength="9"
                           class="textboxStyleBig"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
            </tr>
        </table>
    </div>
    <span style="color:#02A3FB">Retention Cancel</span>
    <br />
    <br />
    <div class="input-append">
        <table class="myTableStyleTabNew">
            <tr>
                
                <td>
                    <span>Cancel Date</span>
                    <input type="text"
                           name="CancelDate"
                           id="CancelDate"
                           value="@Model.Retention_Releasedate" maxlength="4"
                           class="textboxStyle required"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Cancel Amount</span>
                    <input type="text"
                           name="CancelAmount"
                           id="CancelAmountId"
                           value="@Model.Retention_ReleaseAmount" maxlength="9"
                           class="textboxStyle required"
                           style="display: block;width:162px; " />
                </td>
                <td>
                    <span>Balance Amount</span>
                    <input type="text"
                           name="BalanceAmount"
                           id="BalanceAmountId"
                           value="@Model.Retention_BalanceAmount" maxlength="9"
                           class="textboxStyle required"
                           readonly="readonly"
                           style="display: block;width:162px; " />
                </td>
            
        </table>
        <table class="myTableStyleTabNew">
            <tr>
                <td>
                    <span>Remarks</span>
                    <input type="text"
                           name="ECFRemark"
                           id="txtECFRemarkId"
                           value="@Model.Remarks" maxlength="255"
                           class="textboxStyle required"
                           style="display: block;width:502px; " />
                </td>
            </tr>
        </table>
    </div>
    <br />
    <table class="myTableStyleTabNew" align="center">
        <tr>
            <td>
                <div>
                    <button type="button" class="btn btn-danger" value="Cancel" onclick="update()"><span style="color:white;" class="glyphicon glyphicon-remove-sign"></span>CancelRetention</button>
                </div>
            </td>
            <td>
                <div>
                    <button type="button" class="btn btn-warning" value="Close" onclick="Cancel()"> <span style="color:white;" class="glyphicon glyphicon-remove"></span>Close</button>
                </div>
            </td>
        </tr>
    </table>
}
<script>
    function Cancel()
    {
        objDialogRetention.remove();
    }
    $("#CancelDate").datepicker({
        changeMonth: true,
        changeYear: true,
        maxDate: '-id',
        dateFormat: 'dd-mm-yy',
    });
    $("#Retention_date").datepicker({
        changeMonth: true,
        changeYear: true,
        maxDate: '-id',
        dateFormat: 'dd-mm-yy',
    });
    $("#txtInvoiceDate").datepicker({
        changeMonth: true,
        changeYear: true,
        maxDate: '-id',
        dateFormat: 'dd-mm-yy',
    });
    $("#txtInvoiceDate").datepicker({
        changeMonth: true,
        changeYear: true,
        maxDate: '-id',
        dateFormat: 'dd-mm-yy',
    });
    $("#txtInvoiceDate").datepicker({
        changeMonth: true,
        changeYear: true,
        maxDate: '-id',
        dateFormat: 'dd-mm-yy',
    });
    function update()
    {
        var RetentionAmount = $("#RetentionAmountId").val();
        var RetentionRate = $("#RetentionAmountId").val();
        var Canceldate = $("#CancelDate").val();
        var CancelAmount = $("#CancelAmount").val();
        var ReleaseAmount = $("#CancelAmount").val();
        var RetentionException = $("#BalanceAmount").val();
        var Student = {
            "Retention_Amount": RetentionAmount,
            "Retention_rate": RetentionRate,
            "CancelDate": Canceldate,
            "CancelAmount": CancelAmount,
            "release_amount": ReleaseAmount,
            "BalanceAmount": RetentionException
        };
        $.ajax({
            url: '/RetentionCancel/CancelUpdate/',
            data: JSON.stringify(Student),
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            success: function (result) {
                isSuccess = result;
                jAlert(result, "Information", function (r) {
                    if (r == true) {
                        location.reload();
                    }
                });
            },
        })
    }
    $("#CancelAmountId").blur(function () {
        var CancelAmount = $("#CancelAmountId").val();
        var BalAmount = $("#txtBalanceAmountId").val();
        if (Math.round(CancelAmount) !=Math.round(BalAmount))
        {
            jAlert("Cancel Amount Should Be Equal To Balance Amount","Information");
            return false;
        }
        var total = parseFloat(BalAmount) - parseFloat(CancelAmount);
        if (CancelAmount == "")
        {
            $("#BalanceAmountId").val('');
        }
        $("#BalanceAmountId").val(total);
    });
</script>